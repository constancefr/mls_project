import matplotlib.pyplot as plt
import numpy as np


def generate_plot_throughput():

    # Data from the table
    rates = [5, 10, 20, 50, 100]
    models = {
    "Baseline": [0.4371, 0.2230, 0.1148, 0.0536, 0.0301],
    "Queue+Batcher_2": [0.5517, 0.5758, 0.3178, 0.1447, 0.0743],
    "Queue+Batcher_4": [0.6495, 0.5693, 0.4086, 0.1754, 0.0945],
    "Queue+Batcher_8": [0.4990, 1.0424, 0.7718, 0.4646, 0.2605],
    "Queue+Batcher_16": [0.4613, 0.3567, 0.3395, 0.1834, 0.1069]
    }

    # Create the figure
    plt.figure(figsize=(8, 6))

    # Plot each model
    for model, throughput in models.items():
        plt.plot(rates, throughput, marker='o', linestyle='-', label=model)

    # Graph settings
    plt.xlabel("Rate",fontsize=15)
    plt.ylabel("Throughput",fontsize=15)
    plt.title("Throughput vs. Rate",fontsize=15)
    plt.legend(fontsize=12)
    plt.grid(True)

    # Set x-axis ticks to specific values
    plt.xticks(rates,fontsize=12)  # Ensure only the given rates are shown
    plt.yticks(fontsize=12)

    # Use tight layout for better spacing
    plt.tight_layout()

    # Save the figure
    plt.savefig("throughput_vs_rate.png", dpi=300)  # Save as PNG with high resolution

def generate_plot_latency():
    latencies_qb8 = [0.703761100769043, 0.7033562660217285, 0.706719160079956, 0.7018561363220215, 
                  0.7009987831115723, 0.7009837627410889, 1.3047356605529785, 0.6989283561706543, 
                  0.6977717876434326, 1.3014726638793945, 1.3011658191680908, 1.2990827560424805, 
                  1.299041748046875, 1.298048496246338, 1.2984130382537842, 1.2949726581573486, 
                  1.7940483093261719, 1.7933504581451416, 1.79225492477417, 1.794381856918335, 
                  1.7872424125671387, 1.7867457866668701, 1.7845652103424072, 1.7837886810302734, 
                  2.3841614723205566, 2.382791519165039, 2.3821637630462646, 2.380970001220703, 
                  2.380060911178589, 2.379019021987915, 2.3789587020874023, 2.3775627613067627, 
                  2.8765709400177, 2.8741438388824463, 2.872147560119629, 2.8689982891082764, 
                  2.8685145378112793, 2.867006540298462, 2.8678348064422607, 2.864710569381714, 
                  3.4679925441741943, 3.466904640197754, 3.4654715061187744, 3.4646544456481934, 
                  3.4662914276123047, 3.463045835494995, 3.4595022201538086, 3.458111047744751, 
                  3.957674980163574, 3.9601895809173584, 3.9567835330963135, 3.958092212677002, 
                  3.9507057666778564, 3.951180934906006, 3.9484643936157227, 3.944380760192871, 
                  4.445886611938477, 4.444536447525024, 4.445776462554932, 4.446572303771973, 
                  4.441509246826172, 4.436234474182129, 4.4363768100738525, 4.4355244636535645, 
                  4.934560298919678, 4.932788133621216, 4.930554628372192, 4.928258180618286, 
                  4.927270412445068, 4.9257872104644775, 4.925082445144653, 5.6281421184539795, 
                  5.6251935958862305, 4.91958212852478, 5.623186826705933, 5.619758129119873, 
                  5.618579864501953, 5.619624614715576, 5.616462230682373, 5.614818572998047, 
                  6.011602878570557, 6.009275436401367, 6.00792670249939, 6.006478548049927, 
                  6.004785776138306, 6.005018711090088, 6.00375771522522, 5.998849153518677, 
                  6.598677396774292, 6.597738742828369, 6.59891676902771, 6.594026803970337, 
                  6.592607259750366, 6.591189861297607, 6.589354991912842, 7.893571138381958, 
                  6.58361291885376, 7.885267019271851, 7.88336443901062, 7.880850791931152]
    latencies_baseline = [17.5042085647583, 17.520094394683838, 17.465491771697998, 17.909484386444092, 
                        17.56915783882141, 17.816896677017212, 18.121944427490234, 17.268075227737427, 
                        17.849047899246216, 17.575798988342285, 17.418991565704346, 17.52361297607422, 
                        17.818719625473022, 17.834978580474854, 17.760317087173462, 17.775421857833862, 
                        18.467372179031372, 18.020264625549316, 19.07138752937317, 19.384622812271118, 
                        18.77991509437561, 19.282397270202637, 19.24070930480957, 19.802427530288696, 
                        19.106616020202637, 19.353305101394653, 17.488517999649048, 19.00344181060791, 
                        19.810875177383423, 19.363572597503662, 16.581870079040527, 19.268712997436523, 
                        19.047667741775513, 18.79315686225891, 19.190945625305176, 19.04403519630432, 
                        19.30842423439026, 19.2038471698761, 19.550305366516113, 19.34404230117798, 
                        42.181358098983765, 42.17240047454834, 42.184518337249756, 42.15846872329712, 
                        34.079076290130615, 42.1666214466095, 42.1273353099823, 42.13971996307373, 
                        42.11579751968384, 42.129319190979004, 42.10783505439758, 42.13573169708252, 
                        42.12761425971985, 42.13972759246826, 42.11839556694031, 42.092212200164795, 
                        42.11044430732727, 42.09039616584778, 42.113871335983276, 42.120248556137085, 
                        42.099719762802124, 42.09058356285095, 42.094279050827026, 42.07769203186035, 
                        42.097617864608765, 42.06118965148926, 42.05216336250305, 42.06659007072449, 
                        42.06043362617493, 42.059927463531494, 42.05859923362732, 42.06395506858826, 
                        42.05295252799988, 42.06951951980591, 42.027623653411865, 42.062803745269775, 
                        42.04953145980835, 42.03537678718567, 42.03501844406128, 45.13449048995972]
    latencies_qb2= [0.6996688842773438, 0.69927978515625, 1.205320119857788, 1.703989028930664, 1.2022972106933594, 2.805525779724121, 1.6987297534942627, 2.1960067749023438, 2.1920254230499268, 3.2905569076538086, 3.7908003330230713, 2.7810842990875244, 3.2816996574401855, 3.777107000350952, 4.280758619308472, 4.280099630355835, 4.77945351600647, 5.776897430419922, 5.27340841293335, 5.270467042922974, 4.767233371734619, 5.769972324371338, 6.865028619766235, 6.360972166061401, 6.862295389175415, 6.359372615814209, 7.365219354629517, 7.358682870864868, 7.85054349899292, 7.849621534347534, 8.348823070526123, 8.852115154266357, 8.347707748413086, 8.847540140151978, 9.952029466629028, 9.338686227798462, 9.942011833190918, 9.336470127105713, 10.437938213348389, 10.43156886100769, 10.931464195251465, 11.533568620681763, 10.929249286651611, 11.528433561325073, 12.128567934036255, 12.117976665496826, 12.619556665420532, 13.221972465515137, 12.61674189567566, 13.218689918518066, 13.714419841766357, 13.711493730545044, 14.214276313781738, 14.808939456939697, 14.204022645950317, 14.805931568145752, 15.411886215209961, 15.406967639923096, 15.90087342262268, 15.901352882385254, 16.50083827972412, 16.494642734527588, 16.994699478149414, 17.495662927627563, 16.99169898033142, 17.487310647964478, 18.08319401741028, 18.08381414413452, 18.580770015716553, 18.576173067092896, 19.081241130828857, 19.077595472335815, 19.57684898376465, 19.575142860412598, 20.073123931884766, 20.07140827178955, 20.568760871887207, 21.06499409675598, 20.560232400894165, 21.057576417922974, 21.556050777435303, 21.55427384376526, 22.153806447982788, 22.657437324523926, 22.14622139930725, 22.649855613708496, 23.148033142089844, 23.144669771194458, 23.644222497940063, 24.146591663360596, 23.640328407287598, 24.138453245162964, 24.638670206069946, 24.634767055511475, 25.1354923248291, 25.13118052482605, 25.729788064956665, 25.725619316101074, 26.226830005645752, 26.22226595878601]
    latencies_qb4 = [1.0028619766235352, 1.0037257671356201, 1.80631685256958, 1.80775785446167, 1.00004243850708, 0.9986724853515625, 1.8014030456542969, 1.7992024421691895, 2.4981327056884766, 2.489777088165283, 3.2951178550720215, 2.4830877780914307, 2.481297492980957, 3.2850351333618164, 3.2775535583496094, 3.278082847595215, 4.076745271682739, 4.0731916427612305, 4.073439359664917, 4.068477153778076, 4.866795539855957, 5.669070720672607, 4.866960048675537, 4.866235017776489, 4.862001419067383, 5.668599843978882, 5.656378746032715, 5.653575897216797, 6.455219745635986, 6.4491963386535645, 6.447862148284912, 6.4418699741363525, 7.246453762054443, 7.241885423660278, 7.236448526382446, 7.233411550521851, 8.029871463775635, 8.029522180557251, 8.031196117401123, 8.932296514511108, 8.022903442382812, 8.9241042137146, 8.921800136566162, 8.917585611343384, 9.71784234046936, 9.71150827407837, 9.71525239944458, 9.70614242553711, 10.6128089427948, 10.609325647354126, 10.601332426071167, 10.600718021392822, 11.400632619857788, 11.403662919998169, 11.3924081325531, 11.389967441558838, 12.297057628631592, 12.296436309814453, 12.289105415344238, 13.086621761322021, 12.278405904769897, 13.078064918518066, 13.07689905166626, 13.070173025131226, 13.972015142440796, 13.970553159713745, 13.970102787017822, 13.966336011886597, 14.664884328842163, 14.662279844284058, 14.66185736656189, 15.562490940093994, 14.656461000442505, 15.555351972579956, 15.550465822219849, 15.545864820480347, 16.34730815887451, 16.346612215042114, 16.341511726379395, 17.143267393112183, 16.337440967559814, 17.137390613555908, 17.137999773025513, 17.82887077331543, 17.128247022628784, 17.83065676689148, 17.830177307128906, 18.63010573387146, 17.82084035873413, 18.622870206832886, 18.61645245552063, 18.618012189865112, 19.414515495300293, 19.41353750228882, 19.41085147857666, 19.408300161361694, 20.206440687179565, 20.200392246246338, 20.195427179336548, 20.194916009902954]
    latencies_qb16 = [2.7074520587921143, 2.70711612701416, 2.7082159519195557, 2.7071263790130615, 2.7095799446105957, 2.7100830078125, 2.6933319568634033, 2.7030766010284424, 2.691910743713379, 2.696826696395874, 2.69193172454834, 2.692800283432007, 2.687812328338623, 2.688094139099121, 2.680260419845581, 5.176562070846558, 2.6652450561523438, 5.189696550369263, 5.1742002964019775, 5.182982683181763, 5.1648900508880615, 5.163419008255005, 5.1682257652282715, 5.153535604476929, 5.155868768692017, 5.147097826004028, 5.138193130493164, 5.142964839935303, 5.13465428352356, 5.134415149688721, 7.641986608505249, 5.127963066101074, 7.637444257736206, 5.133423328399658, 7.631831407546997, 7.623518228530884, 7.632160186767578, 7.629812717437744, 7.619723081588745, 7.617281675338745, 7.619415521621704, 7.612999200820923, 7.613293886184692, 7.609239816665649, 7.600722789764404, 7.602433919906616, 7.597034215927124, 10.290998935699463, 7.592703580856323, 10.291810274124146, 10.286120176315308, 10.297040224075317, 10.278442859649658, 10.28923487663269, 10.285626411437988, 10.273039817810059, 10.277666568756104, 10.266220092773438, 10.274336576461792, 10.271378517150879, 10.263948678970337, 10.258132219314575, 10.253860235214233, 10.25836181640625, 12.95419430732727, 12.949891328811646, 12.960699558258057, 12.944198608398438, 12.944080352783203, 12.951212167739868, 12.93816590309143, 12.948609828948975, 12.943409204483032, 12.938599586486816, 12.933138608932495, 12.930435419082642, 12.933400630950928, 12.929795742034912, 12.916833400726318, 12.921434164047241, 15.518111944198608, 15.512710332870483, 15.519374370574951, 15.512035608291626, 15.515755414962769, 15.503493785858154, 15.504775285720825, 15.502456426620483, 15.504360675811768, 15.498620510101318, 15.501088619232178, 15.489441394805908, 15.491338729858398, 15.491669178009033, 15.488341331481934, 17.18655800819397, 15.473782062530518, 17.173794507980347, 17.17577815055847, 17.17059898376465]


    # Plot the latencies
    plt.figure(figsize=(10, 6))
    plt.plot(latencies_baseline, label="Baseline", marker="o", linestyle="-")
    plt.plot(latencies_qb2, label="Queue+Batcher_2", marker="o", linestyle="-")
    plt.plot(latencies_qb4, label="Queue+Batcher_4", marker="o", linestyle="-")
    plt.plot(latencies_qb8, label="Queue+Batcher_8", marker="o", linestyle="-")
    plt.plot(latencies_qb16, label="Queue+Batcher_16", marker="o", linestyle="-")


    plt.xlabel("Request Index",fontsize=15)
    plt.ylabel("Latency (seconds)",fontsize=15)
    plt.title("Latency Comparison: Queue+Batcher vs Baseline",fontsize=15)
    plt.legend(fontsize=12)
    plt.xticks(fontsize=12)
    plt.yticks(fontsize=12)
    plt.grid(True)
    plt.tight_layout()

    # Save the figure
    plt.savefig("latency_comparison.png", dpi=300)

generate_plot_latency()
generate_plot_throughput()